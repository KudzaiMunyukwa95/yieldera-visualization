<!DOCTYPE html>
<html lang="en">

<head>
  <base href="/dashboard/">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Yieldera Dashboard</title>

  <!-- Favicon -->
  <link rel="icon" href="/favicon.ico" sizes="32x32" />
  <link rel="icon" href="/favicon.png" type="image/png" sizes="32x32" />
  <link rel="apple-touch-icon" href="/apple-touch-icon.png" sizes="180x180" />

  <!-- External CSS Libraries -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />

  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="css/tailwind-config.js"></script>

  <!-- Custom Styles -->
  <link rel="stylesheet" href="css/dashboard-styles.css">
</head>

<body class="bg-gray-100 flex flex-col h-screen">

  <!-- Mobile Device Detection Overlay -->
  <div id="mobileOverlay">
    <div class="mobile-overlay-content">
      <img src="https://yieldera.co.zw/assets/img/logo.svg" alt="Yieldera Logo" class="mobile-logo">
      <h2 class="text-2xl font-bold mb-4">For the best experience, please use a desktop or laptop computer</h2>
      <p class="mb-6">The Yieldera Dashboard is designed for larger screens to provide you with the most comprehensive
        view of your field data.</p>
      <div class="flex flex-col space-y-3">
        <a href="https://yieldera.co.zw/dashboard/dashboard.html"
          class="bg-primary text-secondary font-medium py-2 px-4 rounded">
          <i class="fas fa-home mr-2"></i>Visit Homepage
        </a>
        <button id="continueAnyway" class="bg-transparent border border-white text-white font-medium py-2 px-4 rounded">
          Continue Anyway (Not Recommended)
        </button>
      </div>
    </div>
  </div>

  <!-- Coming Soon Overlay -->
  <div id="comingSoonOverlay" class="coming-soon-overlay hidden">
    <div class="coming-soon-content">
      <div class="text-6xl text-primary mb-4">
        <i class="fas fa-cog fa-spin"></i>
      </div>
      <h3 class="text-2xl font-bold text-secondary dark:text-white mb-2">Coming Soon</h3>
      <p class="text-gray-600 dark:text-gray-300 mb-6" id="comingSoonMessage">This feature is currently under
        development and will be available soon.</p>
      <button id="closeComingSoon"
        class="bg-primary text-secondary font-medium py-2 px-6 rounded hover:bg-primary-light">
        <i class="fas fa-check mr-2"></i>Got it
      </button>
    </div>
  </div>

  <!-- Authentication & Theme Check Scripts -->
  <script src="js/auth-check.js"></script>
  <script src="js/theme-manager.js"></script>

  <!-- Loading Overlay -->
  <div id="loadingOverlay"
    class="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 text-white">
    <div class="bg-secondary-light p-6 rounded-lg flex flex-col items-center">
      <div class="spinner mb-4"></div>
      <div id="loadingMessage">Loading Yieldera Dashboard...</div>
      <div class="w-full mt-2 bg-gray-700 h-1 rounded-full overflow-hidden">
        <div id="loadingProgress" class="progress-bar"></div>
      </div>
    </div>
  </div>

  <!-- Index Loading Overlay -->
  <div id="indexLoadingOverlay" class="index-loading-overlay">
    <div class="index-loading-content">
      <div class="spinner mb-4"></div>
      <div id="indexLoadingMessage" class="text-center mb-2">Loading Index Data...</div>
      <div class="text-xs text-gray-500 dark:text-gray-300">This may take a few moments</div>
    </div>
  </div>

  <!-- Mobile Toggle Buttons -->
  <button id="sidebarToggle"
    class="md:hidden fixed top-4 left-4 z-40 bg-white dark:bg-secondary text-secondary dark:text-white p-2 rounded-full shadow-lg">
    <i class="fas fa-bars"></i>
  </button>

  <button id="panelToggle"
    class="md:hidden fixed top-4 right-4 z-40 bg-white dark:bg-secondary text-secondary dark:text-white p-2 rounded-full shadow-lg">
    <i class="fas fa-chart-bar"></i>
  </button>

  <!-- Mobile Overlay Backgrounds -->
  <div id="sidebarOverlay" class="sidebar-overlay md:hidden fixed inset-0 z-30 bg-black bg-opacity-50"></div>
  <div id="panelOverlay" class="panel-overlay md:hidden fixed inset-0 z-30 bg-black bg-opacity-50"></div>

  <!-- Main Layout Container -->
  <div class="flex h-full">

    <!-- Sidebar -->
    <aside id="sidebar"
      class="sidebar bg-secondary text-white w-60 md:w-64 flex-shrink-0 md:relative fixed inset-y-0 left-0 z-40 md:z-10 h-full md:transform-none">
      <div class="flex flex-col h-full">
        <!-- Logo -->
        <div class="p-4 border-b border-secondary-light">
          <img src="https://yieldera.co.zw/assets/img/logo.svg" alt="Yieldera Logo" class="h-8">
        </div>

        <!-- Navigation -->
        <nav class="flex-1 overflow-y-auto py-4">
          <ul>
            <li>
              <a href="dashboard.html" class="sidebar-nav-item flex items-center px-4 py-3 text-white active">
                <i class="fas fa-chart-line w-6"></i>
                <span>Dashboard</span>
              </a>
            </li>
            <li>
              <a href="field_management.html" class="sidebar-nav-item flex items-center px-4 py-3 text-white">
                <i class="fas fa-map-marked-alt w-6"></i>
                <span>Fields</span>
              </a>
            </li>
            <li>
              <a href="weather.html" class="sidebar-nav-item flex items-center px-4 py-3 text-white">
                <i class="fas fa-cloud-sun w-6"></i>
                <span>Weather</span>
              </a>
            </li>
            <li>
              <a href="estimator.html" class="sidebar-nav-item flex items-center px-4 py-3 text-white">
                <i class="fas fa-seedling w-6"></i>
                <span>Planting Estimator</span>
              </a>
            </li>
            <li>
              <a href="wrsi.html" class="sidebar-nav-item flex items-center px-4 py-3 text-white">
                <i class="fas fa-tint w-6"></i>
                <span>Drought Monitor</span>
              </a>
            </li>
            <li>
              <a href="visualization" class="sidebar-nav-item flex items-center px-4 py-3 text-white">
                <i class="fas fa-satellite w-6"></i>
                <span>Weather Risk Map</span>
              </a>
            </li>
            <li>
              <a href="frost.html" class="sidebar-nav-item flex items-center px-4 py-3 text-white">
                <i class="fas fa-snowflake w-6"></i>
                <span>Frost Monitor</span>
              </a>
            </li>
            <li>
              <a href="data" class="sidebar-nav-item flex items-center px-4 py-3 text-white">
                <i class="fas fa-database w-6"></i>
                <span>Climate Data Portal</span>
              </a>
            </li>
            <li>
              <a href="pricing.html" class="sidebar-nav-item flex items-center px-4 py-3 text-white">
                <i class="fas fa-calculator w-6"></i>
                <span>Index Pricing</span>
              </a>
            </li>
            <li>
              <div class="sidebar-nav-item coming-soon-item flex items-center px-4 py-3 text-white justify-between"
                data-coming-soon="crop-signature">
                <div class="flex items-center">
                  <i class="fas fa-brain w-6"></i>
                  <span>Crop Signature</span>
                </div>
                <span class="coming-soon-badge">Soon</span>
              </div>
            </li>
            <li>
              <a href="alerts.html" class="sidebar-nav-item flex items-center px-4 py-3 text-white">
                <i class="fas fa-bell w-6"></i>
                <span>Alerts</span>
              </a>
            </li>
            <li>
              <a href="settings.html" class="sidebar-nav-item flex items-center px-4 py-3 text-white">
                <i class="fas fa-cog w-6"></i>
                <span>Settings</span>
              </a>
            </li>
          </ul>

          <!-- Admin Menu -->
          <div id="adminMenu" class="pt-4 mt-4 border-t border-secondary-light">
            <h3 class="px-4 text-xs font-semibold text-gray-400 uppercase tracking-wider">Administration</h3>
            <ul class="mt-2">
              <li>
                <a href="https://yieldera.co.zw/admin/users.html"
                  class="sidebar-nav-item flex items-center px-4 py-3 text-white">
                  <i class="fas fa-users w-6"></i>
                  <span>Manage Users</span>
                </a>
              </li>
              <li>
                <a href="../dashboard/audit.html" class="sidebar-nav-item flex items-center px-4 py-3 text-white">
                  <i class="fas fa-shield-alt w-6"></i>
                  <span>Access Control</span>
                </a>
              </li>
              <li>
                <a href="#" class="sidebar-nav-item flex items-center px-4 py-3 text-white">
                  <i class="fas fa-briefcase w-6"></i>
                  <span>Manage Entities</span>
                </a>
              </li>
              <li>
                <a href="#" class="sidebar-nav-item flex items-center px-4 py-3 text-white">
                  <i class="fas fa-seedling w-6"></i>
                  <span>Manage Crops</span>
                </a>
              </li>
            </ul>
          </div>
        </nav>

        <!-- User Info -->
        <div class="p-4 border-t border-secondary-light">
          <div class="flex items-center justify-between">
            <div class="flex items-center min-w-0 flex-1">
              <div id="userAvatar"
                class="w-10 h-10 rounded-full bg-primary text-secondary flex items-center justify-center text-sm font-bold mr-3 flex-shrink-0">
                KM
              </div>
              <div class="min-w-0 flex-1">
                <div id="userName" class="text-sm font-medium text-white truncate">Kudzai Munyukwa</div>
                <div id="userEntity" class="text-xs text-gray-400 mt-1 truncate">Old Mutual</div>
              </div>
            </div>
            <button id="logout-link"
              class="ml-3 p-2 text-gray-400 hover:text-primary hover:bg-secondary-light rounded-lg transition-colors duration-200 flex-shrink-0"
              title="Logout">
              <i class="fas fa-sign-out-alt text-sm"></i>
            </button>
          </div>
        </div>
      </div>
    </aside>

    <!-- Main Content Area -->
    <main class="flex-1 flex flex-col h-full overflow-hidden">
      <!-- Map Container -->
      <div class="relative flex-1 overflow-hidden">
        <!-- Search Bar -->
        <div
          class="search-container absolute top-4 left-0 right-0 mx-auto w-full max-w-md px-4 md:left-4 md:right-auto md:mx-0">
          <div class="relative">
            <input id="searchField" type="text" placeholder="Search fields, farms or farmers..."
              class="w-full pl-10 pr-4 py-2 rounded-lg border border-gray-300 shadow-sm focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-base dark:bg-secondary-light dark:border-secondary dark:text-white">
            <span class="absolute left-3 top-2.5 text-gray-400">
              <i class="fas fa-search"></i>
            </span>
            <div id="searchSuggestions" class="search-suggestions"></div>
          </div>
        </div>

        <!-- Map Tools -->
        <div
          class="map-tools absolute top-16 left-0 right-0 mx-auto px-4 flex justify-center md:right-4 md:left-auto md:mx-0 md:top-4">
          <div class="map-mode-toggle shadow-md">
            <button id="satelliteBtn" class="map-mode-option active">
              <span class="hidden sm:inline ml-1">Base Map</span>
            </button>
            <button id="indexBtn" class="map-mode-option">
              <span class="hidden sm:inline ml-1">Vegetation</span>
            </button>
          </div>
        </div>

        <!-- Index Selector -->
        <div id="indexSelector" class="hidden">
          <div class="relative">
            <button id="indexSelectorBtn"
              class="bg-white dark:bg-secondary-light text-secondary dark:text-white px-4 py-2 rounded-lg shadow-md flex items-center justify-between min-w-[120px]"
              title="Select vegetation index">
              <span id="selectedIndexName">RGB</span>
              <i class="fas fa-chevron-down ml-2"></i>
            </button>

            <div id="indexDropdown" class="index-selector-dropdown absolute bottom-full mb-2 left-0 hidden">
              <div class="index-option" data-index="RGB" title="True Color Imagery">
                <div class="index-option-title">RGB</div>
              </div>
              <div class="index-option" data-index="NDVI" title="Normalized Difference Vegetation Index">
                <div class="index-option-title">NDVI</div>
              </div>
              <div class="index-option" data-index="EVI" title="Enhanced Vegetation Index">
                <div class="index-option-title">EVI</div>
              </div>
              <div class="index-option" data-index="SAVI" title="Soil Adjusted Vegetation Index">
                <div class="index-option-title">SAVI</div>
              </div>
              <div class="index-option" data-index="NDMI" title="Normalized Difference Moisture Index">
                <div class="index-option-title">NDMI</div>
              </div>
              <div class="index-option" data-index="NDWI" title="Normalized Difference Water Index">
                <div class="index-option-title">NDWI</div>
              </div>
            </div>
          </div>
        </div>

        <!-- Map -->
        <div id="map" class="w-full h-full"></div>

        <!-- Empty State -->
        <div id="emptyStateContainer" class="empty-state-container hidden">
          <div class="mb-4 text-6xl text-primary">
            <i class="fas fa-map-marked-alt"></i>
          </div>
          <h3 class="text-2xl font-bold text-secondary dark:text-white mb-2">No Fields Available</h3>
          <p class="text-gray-600 dark:text-gray-300 mb-6">You don't have access to any fields. Please contact your
            administrator for assistance.</p>
        </div>

        <!-- Index Legend -->
        <div id="indexLegend"
          class="hidden absolute left-4 bg-white p-3 rounded-lg shadow-lg max-w-md text-sm dark:bg-secondary-light dark:text-white">
          <div class="font-semibold mb-2 flex items-center justify-between">
            <span id="legendTitle">Index Values</span>
            <i class="fas fa-info-circle text-xs text-gray-500 dark:text-gray-400"></i>
          </div>
          <div id="legendScale" class="dynamic-scale mb-3"></div>
          <div id="legendLabels" class="grid grid-cols-5 text-xs">
            <span>0.0</span>
            <span class="text-center">0.2</span>
            <span class="text-center">0.4</span>
            <span class="text-center">0.6</span>
            <span class="text-right">0.8-1.0</span>
          </div>
          <div id="legendDescription" class="grid grid-cols-2 mt-2 text-xs">
            <span>Low</span>
            <span class="text-right">High</span>
          </div>
          <div id="legendExplanation" class="mt-3 text-xs text-gray-600 dark:text-gray-400">
            Select an index to view detailed information about vegetation analysis.
          </div>
        </div>
      </div>

      <!-- Date Range Selector -->
      <div class="bg-secondary text-white py-3 px-4 md:px-6">
        <div class="flex flex-col md:flex-row items-center justify-between space-y-3 md:space-y-0">
          <div class="w-full md:w-auto grid grid-cols-2 gap-4">
            <div>
              <label class="text-xs block mb-1 opacity-75">From Date</label>
              <input type="date" id="fromDate"
                class="bg-secondary-light border border-gray-700 rounded px-3 py-2 w-full text-sm focus:outline-none focus:ring-2 focus:ring-primary">
            </div>
            <div>
              <label class="text-xs block mb-1 opacity-75">To Date</label>
              <input type="date" id="toDate"
                class="bg-secondary-light border border-gray-700 rounded px-3 py-2 w-full text-sm focus:outline-none focus:ring-2 focus:ring-primary">
            </div>
          </div>
          <div class="flex space-x-2 w-full md:w-auto">
            <button id="applyDates"
              class="bg-primary text-secondary font-medium py-2 px-4 rounded focus:outline-none hover:bg-primary-light flex-1 md:flex-initial">
              <i class="fas fa-check mr-2"></i>Apply
            </button>
            <button id="resetDates"
              class="bg-transparent border border-gray-600 text-white font-medium py-2 px-4 rounded focus:outline-none hover:bg-secondary-light flex-1 md:flex-initial">
              <i class="fas fa-redo mr-2"></i>Reset
            </button>
          </div>
        </div>
      </div>
    </main>

    <!-- Right Panel -->
    <aside id="panel"
      class="panel bg-white dark:bg-dark-bg border-l border-gray-200 dark:border-gray-800 w-96 flex-shrink-0 md:relative fixed inset-y-0 right-0 z-40 md:z-10 h-full overflow-y-auto md:transform-none dark:text-white">
      <!-- Panel Header -->
      <div class="p-4 border-b border-gray-200 dark:border-gray-800">
        <h2 class="text-lg font-semibold text-secondary dark:text-white">Weather & Index Data</h2>
        <div id="fieldInfo" class="mt-2">
          <div id="fieldName" class="text-base font-medium">Select a field</div>
          <div class="flex items-center mt-1 text-sm text-gray-600 dark:text-gray-300">
            <div class="flex items-center mr-4">
              <i class="fas fa-ruler-combined mr-1"></i>
              <span id="fieldArea">-- ha</span>
            </div>
            <div class="flex items-center">
              <i class="fas fa-user mr-1"></i>
              <span id="fieldOwner">--</span>
            </div>
          </div>
          <div class="flex items-center mt-1 text-sm text-gray-600 dark:text-gray-300">
            <div class="flex items-center mr-4">
              <i class="fas fa-building mr-1"></i>
              <span id="fieldInsurer">--</span>
            </div>
            <div class="flex items-center">
              <i class="fas fa-seedling mr-1"></i>
              <span id="fieldCrop">--</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Panel Tabs -->
      <div class="flex border-b border-gray-200 dark:border-gray-800">
        <button
          class="flex-1 py-3 px-2 text-center text-secondary dark:text-white font-medium border-b-2 border-primary"
          data-tab="current">Current</button>
        <button
          class="flex-1 py-3 px-2 text-center text-gray-600 dark:text-gray-300 font-medium border-b-2 border-transparent"
          data-tab="forecast">Forecast</button>
        <button
          class="flex-1 py-3 px-2 text-center text-gray-600 dark:text-gray-300 font-medium border-b-2 border-transparent"
          data-tab="historical">Historical</button>
        <button
          class="flex-1 py-3 px-2 text-center text-gray-600 dark:text-gray-300 font-medium border-b-2 border-transparent"
          data-tab="indices">Indices</button>
      </div>

      <!-- Current Weather Tab -->
      <div id="currentTab" class="p-4">
        <div class="bg-gray-50 dark:bg-secondary-light rounded-lg p-4 mb-4">
          <div class="flex justify-between items-center mb-3">
            <div id="currentDate" class="font-medium">Select a field</div>
            <div id="weatherIcon" class="text-2xl text-primary"><i class="fas fa-cloud-sun"></i></div>
          </div>
          <div id="currentWeather" class="grid grid-cols-2 gap-4">
            <div class="loading-placeholder">
              <div class="text-xs text-gray-500 dark:text-gray-400">Select a field</div>
              <div class="text-base mt-1">--</div>
            </div>
          </div>
        </div>

        <div id="weatherDataContainer" class="mb-4">
          <div class="text-center text-gray-500 dark:text-gray-400 py-4">Select a field to view weather data</div>
        </div>

        <div class="bg-gray-50 dark:bg-secondary-light rounded-lg p-4 mb-4">
          <h3 class="font-medium mb-3">Temperature Trend</h3>
          <div class="h-48"><canvas id="tempChart"></canvas></div>
        </div>

        <div class="space-y-2">
          <button id="generateWeatherReport"
            class="w-full bg-primary text-secondary font-medium py-2 px-4 rounded flex items-center justify-center">
            <i class="fas fa-file-pdf mr-2"></i>Generate PDF Report
          </button>
          <button id="downloadWeatherData"
            class="w-full bg-white dark:bg-secondary border border-gray-300 dark:border-gray-700 text-gray-800 dark:text-white font-medium py-2 px-4 rounded flex items-center justify-center">
            <i class="fas fa-download mr-2"></i>Download Data (CSV)
          </button>
        </div>
      </div>

      <!-- Forecast Tab -->
      <div id="forecastTab" class="p-4 hidden">
        <div class="bg-gray-50 dark:bg-secondary-light rounded-lg p-4 mb-4">
          <h3 class="font-medium mb-3">7-Day Weather Forecast</h3>
          <div id="forecastData" class="grid grid-cols-1 gap-4">
            <div class="text-center text-gray-500 dark:text-gray-400 py-4">Select a field to view forecast data</div>
          </div>
        </div>
        <div class="space-y-2">
          <button id="generateForecastReport"
            class="w-full bg-primary text-secondary font-medium py-2 px-4 rounded flex items-center justify-center">
            <i class="fas fa-file-pdf mr-2"></i>Generate Forecast Report
          </button>
          <button id="refreshForecastData"
            class="w-full bg-white dark:bg-secondary border border-gray-300 dark:border-gray-700 text-gray-800 dark:text-white font-medium py-2 px-4 rounded flex items-center justify-center">
            <i class="fas fa-sync-alt mr-2"></i>Refresh Forecast
          </button>
        </div>
      </div>

      <!-- Historical Tab -->
      <div id="historicalTab" class="p-4 hidden">
        <div class="bg-gray-50 dark:bg-secondary-light rounded-lg p-4 mb-4">
          <h3 id="historicalDateRange" class="font-medium mb-3">Select a date range</h3>
          <div id="historicalSummary" class="grid grid-cols-2 gap-4"></div>
        </div>
        <div class="bg-gray-50 dark:bg-secondary-light rounded-lg p-4 mb-4">
          <h3 class="font-medium mb-3">Temperature & Rainfall</h3>
          <div class="h-48"><canvas id="historicalChart"></canvas></div>
        </div>
      </div>

      <!-- Indices Tab -->
      <div id="indicesTab" class="p-4 hidden">
        <div class="bg-gray-50 dark:bg-secondary-light rounded-lg p-4 mb-4">
          <h3 id="indexDateRange" class="font-medium mb-3">Select a date range</h3>
          <div class="mb-4">
            <div class="flex items-center">
              <div class="text-xs text-gray-500 dark:text-gray-400" id="indexValueLabel">Index imagery for date:</div>
              <div id="cloudCoverBadge" class="hidden cloud-badge">
                <i class="fas fa-cloud mr-1"></i>
                <span id="cloudCoverValue">--</span>%
              </div>
            </div>
            <div id="currentIndexValue" class="text-2xl font-bold mt-1">--</div>
            <div id="indexCaptureDate" class="text-xs text-gray-500 dark:text-gray-400 mt-1">Image captured: --</div>
          </div>
          <div class="mb-4">
            <div id="dynamicIndexScale" class="dynamic-scale mb-2"></div>
            <div class="flex justify-between text-xs">
              <span id="indexRangeMin">0.0</span>
              <span id="indexRangeMax">1.0</span>
            </div>
          </div>
          <div id="indexStats" class="grid grid-cols-2 gap-2 mb-4 text-sm">
            <div><span class="text-xs text-gray-500 dark:text-gray-400">Min Value:</span><span id="minIndexValue"
                class="ml-1">--</span></div>
            <div><span class="text-xs text-gray-500 dark:text-gray-400">Max Value:</span><span id="maxIndexValue"
                class="ml-1">--</span></div>
            <div><span class="text-xs text-gray-500 dark:text-gray-400">Cloud Cover:</span><span id="cloudCoverText"
                class="ml-1">--</span></div>
            <div><span class="text-xs text-gray-500 dark:text-gray-400">Image Quality:</span><span id="imageQuality"
                class="ml-1">--</span></div>
            <div><span class="text-xs text-gray-500 dark:text-gray-400">Images Used:</span><span id="imageCount"
                class="ml-1">--</span></div>
          </div>
          <div id="indexDescription" class="text-sm text-gray-600 dark:text-gray-300 mt-2">
            Select an index to view detailed information about vegetation health and analysis.
          </div>
        </div>
        <div class="bg-gray-50 dark:bg-secondary-light rounded-lg p-4 mb-4">
          <h3 class="font-medium mb-3">Index History</h3>
          <div class="h-48"><canvas id="indexChart"></canvas></div>
        </div>
        <div class="space-y-2">
          <button id="generateIndexReport"
            class="w-full bg-primary text-secondary font-medium py-2 px-4 rounded flex items-center justify-center">
            <i class="fas fa-file-pdf mr-2"></i>Generate Index PDF Report
          </button>
          <button id="refreshIndexData"
            class="w-full bg-white dark:bg-secondary border border-gray-300 dark:border-gray-700 text-gray-800 dark:text-white font-medium py-2 px-4 rounded flex items-center justify-center">
            <i class="fas fa-sync-alt mr-2"></i>Refresh Index Data
          </button>
        </div>
      </div>
    </aside>
  </div>

  <!-- Notification System -->
  <div id="notificationContainer" class="fixed bottom-4 right-4 z-[9999] flex flex-col"></div>

  <!-- External JavaScript Libraries -->
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>

  <!-- Modular JavaScript -->
  <script src="js/config.js"></script>
  <script src="js/utils.js"></script>
  <script src="js/notifications.js"></script>
  <script src="js/mobile-detect.js"></script>
  <script src="js/map-manager.js"></script>
  <script src="js/field-manager.js"></script>
  <script src="js/weather-manager.js"></script>
  <script src="js/index-manager.js"></script>
  <script src="js/ui-manager.js"></script>
  <script src="js/report-generator.js"></script>
  <script src="js/main.js"></script>
  <script src="js/navigation-highlight.js"></script>
</body>

</html>